import { Scene as m, WebGLRenderer as g, sRGBEncoding as y, PerspectiveCamera as w, Mesh as M, MeshStandardMaterial as b, Group as p, BufferGeometry as x, BufferAttribute as A } from "three";
import { CSS3DRenderer as E } from "three/addons/renderers/CSS3DRenderer.js";
import { C as R } from "./controller-cOlVA5Ir.js";
import { U as S } from "./ui-IMm-LJr2.js";
const I = { BufferGeometry: x, BufferAttribute: A };
class C {
  constructor({
    container: a,
    uiLoading: t = "yes",
    uiScanning: o = "yes",
    uiError: n = "yes",
    filterMinCF: e = null,
    filterBeta: h = null,
    userDeviceId: s = null,
    environmentDeviceId: c = null,
    disableFaceMirror: l = !1
  }) {
    this.container = a, this.ui = new S({ uiLoading: t, uiScanning: o, uiError: n }), this.controller = new R({
      filterMinCF: e,
      filterBeta: h
    }), this.disableFaceMirror = l, this.scene = new m(), this.cssScene = new m(), this.renderer = new g({ antialias: !0, alpha: !0 }), this.cssRenderer = new E({ antialias: !0 }), this.renderer.outputEncoding = y, this.renderer.setPixelRatio(window.devicePixelRatio), this.camera = new w(), this.userDeviceId = s, this.environmentDeviceId = c, this.anchors = [], this.faceMeshes = [], this.latestEstimate = null, this.container.appendChild(this.renderer.domElement), this.container.appendChild(this.cssRenderer.domElement), this.shouldFaceUser = !0, window.addEventListener("resize", this._resize.bind(this));
  }
  async start() {
    this.ui.showLoading(), await this._startVideo(), await this._startAR(), this.ui.hideLoading();
  }
  stop() {
    this.video.srcObject.getTracks().forEach(function(t) {
      t.stop();
    }), this.video.remove(), this.controller.stopProcessVideo();
  }
  switchCamera() {
    this.shouldFaceUser = !this.shouldFaceUser, this.stop(), this.start();
  }
  addFaceMesh() {
    const a = this.controller.createThreeFaceGeometry(I), t = new M(a, new b({ color: 16777215 }));
    return t.visible = !1, t.matrixAutoUpdate = !1, this.faceMeshes.push(t), t;
  }
  addAnchor(a) {
    const t = new p();
    t.matrixAutoUpdate = !1;
    const o = { group: t, landmarkIndex: a, css: !1 };
    return this.anchors.push(o), this.scene.add(t), o;
  }
  addCSSAnchor(a) {
    const t = new p();
    t.matrixAutoUpdate = !1;
    const o = { group: t, landmarkIndex: a, css: !0 };
    return this.anchors.push(o), this.cssScene.add(t), o;
  }
  getLatestEstimate() {
    return this.latestEstimate;
  }
  _startVideo() {
    return new Promise((a, t) => {
      if (this.video = document.createElement("video"), this.video.setAttribute("autoplay", ""), this.video.setAttribute("muted", ""), this.video.setAttribute("playsinline", ""), this.video.style.position = "absolute", this.video.style.top = "0px", this.video.style.left = "0px", this.video.style.zIndex = "-2", this.container.appendChild(this.video), !navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        this.ui.showCompatibility(), t();
        return;
      }
      const o = {
        audio: !1,
        video: {}
      };
      this.shouldFaceUser ? this.userDeviceId ? o.video.deviceId = { exact: this.userDeviceId } : o.video.facingMode = "user" : this.environmentDeviceId ? o.video.deviceId = { exact: this.environmentDeviceId } : o.video.facingMode = "environment", navigator.mediaDevices.getUserMedia(o).then((n) => {
        this.video.addEventListener("loadedmetadata", () => {
          this.video.setAttribute("width", this.video.videoWidth), this.video.setAttribute("height", this.video.videoHeight), a();
        }), this.video.srcObject = n;
      }).catch((n) => {
        console.log("getUserMedia error", n), t();
      });
    });
  }
  _startAR() {
    return new Promise(async (a, t) => {
      const o = this.video;
      this.container, this.controller.onUpdate = ({ hasFace: e, estimateResult: h }) => {
        for (let s = 0; s < this.anchors.length; s++)
          this.anchors[s].css ? this.anchors[s].group.children.forEach((c) => {
            c.element.style.visibility = e ? "visible" : "hidden";
          }) : this.anchors[s].group.visible = e;
        for (let s = 0; s < this.faceMeshes.length; s++)
          this.faceMeshes[s].visible = e;
        if (e) {
          const { metricLandmarks: s, faceMatrix: c, faceScale: l, blendshapes: d } = h;
          this.latestEstimate = h;
          for (let r = 0; r < this.anchors.length; r++) {
            const v = this.anchors[r].landmarkIndex, i = this.controller.getLandmarkMatrix(v);
            if (this.anchors[r].css) {
              const u = [
                1e-3 * i[0],
                1e-3 * i[1],
                i[2],
                i[3],
                1e-3 * i[4],
                1e-3 * i[5],
                i[6],
                i[7],
                1e-3 * i[8],
                1e-3 * i[9],
                i[10],
                i[11],
                1e-3 * i[12],
                1e-3 * i[13],
                i[14],
                i[15]
              ];
              this.anchors[r].group.matrix.set(...u);
            } else
              this.anchors[r].group.matrix.set(...i);
          }
          for (let r = 0; r < this.faceMeshes.length; r++)
            this.faceMeshes[r].matrix.set(...c);
        } else
          this.latestEstimate = null;
      }, this._resize();
      const n = this.shouldFaceUser && !this.disableFaceMirror;
      await this.controller.setup(n), await this.controller.dummyRun(o), this._resize(), this.controller.processVideo(o), a();
    });
  }
  _resize() {
    const { renderer: a, cssRenderer: t, camera: o, container: n, video: e } = this;
    if (!e)
      return;
    {
      this.video.setAttribute("width", this.video.videoWidth), this.video.setAttribute("height", this.video.videoHeight), this.controller.onInputResized(e);
      const { fov: v, aspect: i, near: f, far: u } = this.controller.getCameraParams();
      this.camera.fov = v, this.camera.aspect = i, this.camera.near = f, this.camera.far = u, this.camera.updateProjectionMatrix(), this.renderer.setSize(this.video.videoWidth, this.video.videoHeight), this.cssRenderer.setSize(this.video.videoWidth, this.video.videoHeight);
    }
    let h, s;
    const c = e.videoWidth / e.videoHeight, l = n.clientWidth / n.clientHeight;
    c > l ? (s = n.clientHeight, h = s * c) : (h = n.clientWidth, s = h / c), e.style.top = -(s - n.clientHeight) / 2 + "px", e.style.left = -(h - n.clientWidth) / 2 + "px", e.style.width = h + "px", e.style.height = s + "px", this.shouldFaceUser && !this.disableFaceMirror ? e.style.transform = "scaleX(-1)" : e.style.transform = "scaleX(1)";
    const d = a.domElement, r = t.domElement;
    d.style.position = "absolute", d.style.top = e.style.top, d.style.left = e.style.left, d.style.width = e.style.width, d.style.height = e.style.height, r.style.position = "absolute", r.style.top = e.style.top, r.style.left = e.style.left, r.style.transformOrigin = "top left", r.style.transform = "scale(" + h / parseFloat(r.style.width) + "," + s / parseFloat(r.style.height) + ")";
  }
}
window.MINDAR || (window.MINDAR = {});
window.MINDAR.FACE || (window.MINDAR.FACE = {});
window.MINDAR.FACE.MindARThree = C;
export {
  C as MindARThree
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluZGFyLWZhY2UtdGhyZWUuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9mYWNlLXRhcmdldC90aHJlZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2VuZSwgV2ViR0xSZW5kZXJlciwgUGVyc3BlY3RpdmVDYW1lcmEsIHNSR0JFbmNvZGluZywgTWVzaCwgTWVzaFN0YW5kYXJkTWF0ZXJpYWwsIEdyb3VwIH0gZnJvbSBcInRocmVlXCI7XG4vL2ltcG9ydCB7IENTUzNEUmVuZGVyZXIgfSBmcm9tICcuLi9saWJzL0NTUzNEUmVuZGVyZXIuanMnO1xuaW1wb3J0IHtDU1MzRFJlbmRlcmVyfSBmcm9tICd0aHJlZS9hZGRvbnMvcmVuZGVyZXJzL0NTUzNEUmVuZGVyZXIuanMnXG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSBcIi4vY29udHJvbGxlci5qc1wiO1xuaW1wb3J0IHsgVUkgfSBmcm9tIFwiLi4vdWkvdWkuanNcIjtcbmltcG9ydCB7QnVmZmVyR2VvbWV0cnksQnVmZmVyQXR0cmlidXRlfSBmcm9tIFwidGhyZWVcIjtcbmNvbnN0IFRIUkVFPXtCdWZmZXJHZW9tZXRyeSxCdWZmZXJBdHRyaWJ1dGV9O1xuXG5leHBvcnQgY2xhc3MgTWluZEFSVGhyZWUge1xuICBjb25zdHJ1Y3Rvcih7Y29udGFpbmVyLCB1aUxvYWRpbmc9XCJ5ZXNcIiwgdWlTY2FubmluZz1cInllc1wiLCB1aUVycm9yPVwieWVzXCIsIGZpbHRlck1pbkNGPW51bGwsIGZpbHRlckJldGE9bnVsbCxcbiAgICB1c2VyRGV2aWNlSWQgPSBudWxsLCBlbnZpcm9ubWVudERldmljZUlkID0gbnVsbCwgZGlzYWJsZUZhY2VNaXJyb3IgPSBmYWxzZSxcbiAgfSkge1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMudWkgPSBuZXcgVUkoeyB1aUxvYWRpbmcsIHVpU2Nhbm5pbmcsIHVpRXJyb3IgfSk7XG5cbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcih7XG4gICAgICBmaWx0ZXJNaW5DRjogZmlsdGVyTWluQ0YsXG4gICAgICBmaWx0ZXJCZXRhOiBmaWx0ZXJCZXRhLFxuICAgIH0pO1xuICAgIHRoaXMuZGlzYWJsZUZhY2VNaXJyb3IgPSBkaXNhYmxlRmFjZU1pcnJvcjtcbiAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgdGhpcy5jc3NTY2VuZSA9IG5ldyBTY2VuZSgpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSwgYWxwaGE6IHRydWUgfSk7XG4gICAgdGhpcy5jc3NSZW5kZXJlciA9IG5ldyBDU1MzRFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pO1xuICAgIHRoaXMucmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpO1xuICAgIHRoaXMudXNlckRldmljZUlkID0gdXNlckRldmljZUlkO1xuICAgIHRoaXMuZW52aXJvbm1lbnREZXZpY2VJZCA9IGVudmlyb25tZW50RGV2aWNlSWQ7XG5cbiAgICB0aGlzLmFuY2hvcnMgPSBbXTtcbiAgICB0aGlzLmZhY2VNZXNoZXMgPSBbXTtcblxuICAgIHRoaXMubGF0ZXN0RXN0aW1hdGUgPSBudWxsO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNzc1JlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gICAgdGhpcy5zaG91bGRGYWNlVXNlciA9IHRydWU7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fcmVzaXplLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnQoKSB7XG4gICAgdGhpcy51aS5zaG93TG9hZGluZygpO1xuICAgIGF3YWl0IHRoaXMuX3N0YXJ0VmlkZW8oKTtcbiAgICBhd2FpdCB0aGlzLl9zdGFydEFSKCk7XG4gICAgdGhpcy51aS5oaWRlTG9hZGluZygpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBjb25zdCB0cmFja3MgPSB0aGlzLnZpZGVvLnNyY09iamVjdC5nZXRUcmFja3MoKTtcbiAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHtcbiAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICB9KTtcbiAgICB0aGlzLnZpZGVvLnJlbW92ZSgpO1xuICAgIHRoaXMuY29udHJvbGxlci5zdG9wUHJvY2Vzc1ZpZGVvKCk7XG4gIH1cblxuICBzd2l0Y2hDYW1lcmEoKSB7XG4gICAgdGhpcy5zaG91bGRGYWNlVXNlciA9ICF0aGlzLnNob3VsZEZhY2VVc2VyO1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuc3RhcnQoKTtcbiAgfVxuXG4gIGFkZEZhY2VNZXNoKCkge1xuICAgIGNvbnN0IGZhY2VHZW9tZXRyeSA9IHRoaXMuY29udHJvbGxlci5jcmVhdGVUaHJlZUZhY2VHZW9tZXRyeShUSFJFRSk7XG4gICAgY29uc3QgZmFjZU1lc2ggPSBuZXcgTWVzaChmYWNlR2VvbWV0cnksIG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweGZmZmZmZiB9KSk7XG4gICAgZmFjZU1lc2gudmlzaWJsZSA9IGZhbHNlO1xuICAgIGZhY2VNZXNoLm1hdHJpeEF1dG9VcGRhdGUgPSBmYWxzZTtcbiAgICB0aGlzLmZhY2VNZXNoZXMucHVzaChmYWNlTWVzaCk7XG4gICAgcmV0dXJuIGZhY2VNZXNoO1xuICB9XG5cbiAgYWRkQW5jaG9yKGxhbmRtYXJrSW5kZXgpIHtcbiAgICBjb25zdCBncm91cCA9IG5ldyBHcm91cCgpO1xuICAgIGdyb3VwLm1hdHJpeEF1dG9VcGRhdGUgPSBmYWxzZTtcbiAgICBjb25zdCBhbmNob3IgPSB7IGdyb3VwLCBsYW5kbWFya0luZGV4LCBjc3M6IGZhbHNlIH07XG4gICAgdGhpcy5hbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICB0aGlzLnNjZW5lLmFkZChncm91cCk7XG4gICAgcmV0dXJuIGFuY2hvcjtcbiAgfVxuXG4gIGFkZENTU0FuY2hvcihsYW5kbWFya0luZGV4KSB7XG4gICAgY29uc3QgZ3JvdXAgPSBuZXcgR3JvdXAoKTtcbiAgICBncm91cC5tYXRyaXhBdXRvVXBkYXRlID0gZmFsc2U7XG4gICAgY29uc3QgYW5jaG9yID0geyBncm91cCwgbGFuZG1hcmtJbmRleCwgY3NzOiB0cnVlIH07XG4gICAgdGhpcy5hbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICB0aGlzLmNzc1NjZW5lLmFkZChncm91cCk7XG4gICAgcmV0dXJuIGFuY2hvcjtcbiAgfVxuXG4gIGdldExhdGVzdEVzdGltYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmxhdGVzdEVzdGltYXRlO1xuICB9XG5cbiAgX3N0YXJ0VmlkZW8oKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuXG4gICAgICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgnYXV0b3BsYXknLCAnJyk7XG4gICAgICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgnbXV0ZWQnLCAnJyk7XG4gICAgICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgncGxheXNpbmxpbmUnLCAnJyk7XG4gICAgICB0aGlzLnZpZGVvLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xuICAgICAgdGhpcy52aWRlby5zdHlsZS50b3AgPSAnMHB4J1xuICAgICAgdGhpcy52aWRlby5zdHlsZS5sZWZ0ID0gJzBweCdcbiAgICAgIHRoaXMudmlkZW8uc3R5bGUuekluZGV4ID0gJy0yJ1xuICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy52aWRlbyk7XG5cbiAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgdGhpcy51aS5zaG93Q29tcGF0aWJpbGl0eSgpO1xuICAgICAgICByZWplY3QoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgYXVkaW86IGZhbHNlLFxuICAgICAgICB2aWRlbzoge31cbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5zaG91bGRGYWNlVXNlcikge1xuICAgICAgICBpZiAodGhpcy51c2VyRGV2aWNlSWQpIHtcbiAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZCA9IHsgZXhhY3Q6IHRoaXMudXNlckRldmljZUlkIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZmFjaW5nTW9kZSA9ICd1c2VyJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuZW52aXJvbm1lbnREZXZpY2VJZCkge1xuICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmRldmljZUlkID0geyBleGFjdDogdGhpcy5lbnZpcm9ubWVudERldmljZUlkIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZmFjaW5nTW9kZSA9ICdlbnZpcm9ubWVudCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oKHN0cmVhbSkgPT4ge1xuICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMudmlkZW8uc2V0QXR0cmlidXRlKCd3aWR0aCcsIHRoaXMudmlkZW8udmlkZW9XaWR0aCk7XG4gICAgICAgICAgdGhpcy52aWRlby5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHRoaXMudmlkZW8udmlkZW9IZWlnaHQpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcImdldFVzZXJNZWRpYSBlcnJvclwiLCBlcnIpO1xuICAgICAgICByZWplY3QoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3N0YXJ0QVIoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHZpZGVvID0gdGhpcy52aWRlbztcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuXG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25VcGRhdGUgPSAoeyBoYXNGYWNlLCBlc3RpbWF0ZVJlc3VsdCB9KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hbmNob3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXMuYW5jaG9yc1tpXS5jc3MpIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yc1tpXS5ncm91cC5jaGlsZHJlbi5mb3JFYWNoKChvYmopID0+IHtcbiAgICAgICAgICAgICAgb2JqLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IGhhc0ZhY2UgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbmNob3JzW2ldLmdyb3VwLnZpc2libGUgPSBoYXNGYWNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU1lc2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZmFjZU1lc2hlc1tpXS52aXNpYmxlID0gaGFzRmFjZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYXNGYWNlKSB7XG4gICAgICAgICAgY29uc3QgeyBtZXRyaWNMYW5kbWFya3MsIGZhY2VNYXRyaXgsIGZhY2VTY2FsZSwgYmxlbmRzaGFwZXN9ID0gZXN0aW1hdGVSZXN1bHQ7XG4gICAgICAgICAgdGhpcy5sYXRlc3RFc3RpbWF0ZSA9IGVzdGltYXRlUmVzdWx0O1xuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFuY2hvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxhbmRtYXJrSW5kZXggPSB0aGlzLmFuY2hvcnNbaV0ubGFuZG1hcmtJbmRleDtcbiAgICAgICAgICAgIGNvbnN0IGxhbmRtYXJrTWF0cml4ID0gdGhpcy5jb250cm9sbGVyLmdldExhbmRtYXJrTWF0cml4KGxhbmRtYXJrSW5kZXgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hbmNob3JzW2ldLmNzcykge1xuICAgICAgICAgICAgICBjb25zdCBjc3NTY2FsZSA9IDAuMDAxO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHNjYWxlZEVsZW1lbnRzID0gW1xuICAgICAgICAgICAgICAgIGNzc1NjYWxlICogbGFuZG1hcmtNYXRyaXhbMF0sIGNzc1NjYWxlICogbGFuZG1hcmtNYXRyaXhbMV0sIGxhbmRtYXJrTWF0cml4WzJdLCBsYW5kbWFya01hdHJpeFszXSxcbiAgICAgICAgICAgICAgICBjc3NTY2FsZSAqIGxhbmRtYXJrTWF0cml4WzRdLCBjc3NTY2FsZSAqIGxhbmRtYXJrTWF0cml4WzVdLCBsYW5kbWFya01hdHJpeFs2XSwgbGFuZG1hcmtNYXRyaXhbN10sXG4gICAgICAgICAgICAgICAgY3NzU2NhbGUgKiBsYW5kbWFya01hdHJpeFs4XSwgY3NzU2NhbGUgKiBsYW5kbWFya01hdHJpeFs5XSwgbGFuZG1hcmtNYXRyaXhbMTBdLCBsYW5kbWFya01hdHJpeFsxMV0sXG4gICAgICAgICAgICAgICAgY3NzU2NhbGUgKiBsYW5kbWFya01hdHJpeFsxMl0sIGNzc1NjYWxlICogbGFuZG1hcmtNYXRyaXhbMTNdLCBsYW5kbWFya01hdHJpeFsxNF0sIGxhbmRtYXJrTWF0cml4WzE1XVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIHRoaXMuYW5jaG9yc1tpXS5ncm91cC5tYXRyaXguc2V0KC4uLnNjYWxlZEVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuYW5jaG9yc1tpXS5ncm91cC5tYXRyaXguc2V0KC4uLmxhbmRtYXJrTWF0cml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VNZXNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZmFjZU1lc2hlc1tpXS5tYXRyaXguc2V0KC4uLmZhY2VNYXRyaXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxhdGVzdEVzdGltYXRlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fcmVzaXplKCk7XG5cbiAgICAgIGNvbnN0IGZsaXBGYWNlID0gdGhpcy5zaG91bGRGYWNlVXNlciAmJiAhdGhpcy5kaXNhYmxlRmFjZU1pcnJvcjtcblxuICAgICAgYXdhaXQgdGhpcy5jb250cm9sbGVyLnNldHVwKGZsaXBGYWNlKTtcbiAgICAgIGF3YWl0IHRoaXMuY29udHJvbGxlci5kdW1teVJ1bih2aWRlbyk7XG5cbiAgICAgIHRoaXMuX3Jlc2l6ZSgpO1xuICAgICAgdGhpcy5jb250cm9sbGVyLnByb2Nlc3NWaWRlbyh2aWRlbyk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG4gIH1cblxuICBfcmVzaXplKCkge1xuICAgIGNvbnN0IHsgcmVuZGVyZXIsIGNzc1JlbmRlcmVyLCBjYW1lcmEsIGNvbnRhaW5lciwgdmlkZW8gfSA9IHRoaXM7XG4gICAgaWYgKCF2aWRlbykgcmV0dXJuO1xuXG4gICAgaWYgKHRydWUpIHsgLy8gb25seSBuZWVkZWQgaWYgdmlkZW8gZGltZW5zaW9uIHVwZGF0ZWQgKGUuZy4gd2hlbiBtb2JpbGUgb3JpZW50YXRpb24gY2hhbmdlcylcbiAgICAgIHRoaXMudmlkZW8uc2V0QXR0cmlidXRlKCd3aWR0aCcsIHRoaXMudmlkZW8udmlkZW9XaWR0aCk7XG4gICAgICB0aGlzLnZpZGVvLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgdGhpcy52aWRlby52aWRlb0hlaWdodCk7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25JbnB1dFJlc2l6ZWQodmlkZW8pO1xuXG4gICAgICBjb25zdCB7IGZvdiwgYXNwZWN0LCBuZWFyLCBmYXIgfSA9IHRoaXMuY29udHJvbGxlci5nZXRDYW1lcmFQYXJhbXMoKTtcbiAgICAgIHRoaXMuY2FtZXJhLmZvdiA9IGZvdjtcbiAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IGFzcGVjdDtcbiAgICAgIHRoaXMuY2FtZXJhLm5lYXIgPSBuZWFyO1xuICAgICAgdGhpcy5jYW1lcmEuZmFyID0gZmFyO1xuICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUodGhpcy52aWRlby52aWRlb1dpZHRoLCB0aGlzLnZpZGVvLnZpZGVvSGVpZ2h0KTtcbiAgICAgIHRoaXMuY3NzUmVuZGVyZXIuc2V0U2l6ZSh0aGlzLnZpZGVvLnZpZGVvV2lkdGgsIHRoaXMudmlkZW8udmlkZW9IZWlnaHQpO1xuICAgIH1cblxuICAgIGxldCB2dywgdmg7IC8vIGRpc3BsYXkgY3NzIHdpZHRoLCBoZWlnaHRcbiAgICBjb25zdCB2aWRlb1JhdGlvID0gdmlkZW8udmlkZW9XaWR0aCAvIHZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgIGNvbnN0IGNvbnRhaW5lclJhdGlvID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC8gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICBpZiAodmlkZW9SYXRpbyA+IGNvbnRhaW5lclJhdGlvKSB7XG4gICAgICB2aCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICB2dyA9IHZoICogdmlkZW9SYXRpbztcbiAgICB9IGVsc2Uge1xuICAgICAgdncgPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICB2aCA9IHZ3IC8gdmlkZW9SYXRpbztcbiAgICB9XG5cbiAgICB2aWRlby5zdHlsZS50b3AgPSAoLSh2aCAtIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpIC8gMikgKyBcInB4XCI7XG4gICAgdmlkZW8uc3R5bGUubGVmdCA9ICgtKHZ3IC0gY29udGFpbmVyLmNsaWVudFdpZHRoKSAvIDIpICsgXCJweFwiO1xuICAgIHZpZGVvLnN0eWxlLndpZHRoID0gdncgKyBcInB4XCI7XG4gICAgdmlkZW8uc3R5bGUuaGVpZ2h0ID0gdmggKyBcInB4XCI7XG5cbiAgICBpZiAodGhpcy5zaG91bGRGYWNlVXNlciAmJiAhdGhpcy5kaXNhYmxlRmFjZU1pcnJvcikge1xuICAgICAgdmlkZW8uc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgtMSknO1xuICAgIH0gZWxzZSB7XG4gICAgICB2aWRlby5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKDEpJztcbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXMgPSByZW5kZXJlci5kb21FbGVtZW50O1xuICAgIGNvbnN0IGNzc0NhbnZhcyA9IGNzc1JlbmRlcmVyLmRvbUVsZW1lbnQ7XG5cbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNhbnZhcy5zdHlsZS50b3AgPSB2aWRlby5zdHlsZS50b3A7XG4gICAgY2FudmFzLnN0eWxlLmxlZnQgPSB2aWRlby5zdHlsZS5sZWZ0O1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IHZpZGVvLnN0eWxlLndpZHRoO1xuICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSB2aWRlby5zdHlsZS5oZWlnaHQ7XG5cbiAgICBjc3NDYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNzc0NhbnZhcy5zdHlsZS50b3AgPSB2aWRlby5zdHlsZS50b3A7XG4gICAgY3NzQ2FudmFzLnN0eWxlLmxlZnQgPSB2aWRlby5zdHlsZS5sZWZ0O1xuICAgIC8vIGNhbm5vdCBzZXQgc3R5bGUgd2lkdGggZm9yIGNzc0NhbnZhcywgYmVjYXVzZSB0aGF0IGlzIGFsc28gdXNlZCBhcyByZW5kZXJlciBzaXplXG4gICAgLy9jc3NDYW52YXMuc3R5bGUud2lkdGggPSB2aWRlby5zdHlsZS53aWR0aDtcbiAgICAvL2Nzc0NhbnZhcy5zdHlsZS5oZWlnaHQgPSB2aWRlby5zdHlsZS5oZWlnaHQ7XG4gICAgY3NzQ2FudmFzLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwidG9wIGxlZnRcIjtcbiAgICBjc3NDYW52YXMuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKCcgKyAodncgLyBwYXJzZUZsb2F0KGNzc0NhbnZhcy5zdHlsZS53aWR0aCkpICsgJywnICsgKHZoIC8gcGFyc2VGbG9hdChjc3NDYW52YXMuc3R5bGUuaGVpZ2h0KSkgKyAnKSc7XG4gIH1cbn1cblxuaWYgKCF3aW5kb3cuTUlOREFSKSB7XG4gIHdpbmRvdy5NSU5EQVIgPSB7fTtcbn1cbmlmICghd2luZG93Lk1JTkRBUi5GQUNFKSB7XG4gIHdpbmRvdy5NSU5EQVIuRkFDRSA9IHt9O1xufVxuXG53aW5kb3cuTUlOREFSLkZBQ0UuTWluZEFSVGhyZWUgPSBNaW5kQVJUaHJlZTtcbi8vd2luZG93Lk1JTkRBUi5GQUNFLlRIUkVFID0gVEhSRUU7XG4iXSwibmFtZXMiOlsiVEhSRUUiLCJCdWZmZXJHZW9tZXRyeSIsIkJ1ZmZlckF0dHJpYnV0ZSIsIk1pbmRBUlRocmVlIiwiY29udGFpbmVyIiwidWlMb2FkaW5nIiwidWlTY2FubmluZyIsInVpRXJyb3IiLCJmaWx0ZXJNaW5DRiIsImZpbHRlckJldGEiLCJ1c2VyRGV2aWNlSWQiLCJlbnZpcm9ubWVudERldmljZUlkIiwiZGlzYWJsZUZhY2VNaXJyb3IiLCJVSSIsIkNvbnRyb2xsZXIiLCJTY2VuZSIsIldlYkdMUmVuZGVyZXIiLCJDU1MzRFJlbmRlcmVyIiwic1JHQkVuY29kaW5nIiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJ0cmFjayIsImZhY2VHZW9tZXRyeSIsImZhY2VNZXNoIiwiTWVzaCIsIk1lc2hTdGFuZGFyZE1hdGVyaWFsIiwibGFuZG1hcmtJbmRleCIsImdyb3VwIiwiR3JvdXAiLCJhbmNob3IiLCJyZXNvbHZlIiwicmVqZWN0IiwiY29uc3RyYWludHMiLCJzdHJlYW0iLCJlcnIiLCJ2aWRlbyIsImhhc0ZhY2UiLCJlc3RpbWF0ZVJlc3VsdCIsImkiLCJvYmoiLCJtZXRyaWNMYW5kbWFya3MiLCJmYWNlTWF0cml4IiwiZmFjZVNjYWxlIiwiYmxlbmRzaGFwZXMiLCJsYW5kbWFya01hdHJpeCIsInNjYWxlZEVsZW1lbnRzIiwiZmxpcEZhY2UiLCJyZW5kZXJlciIsImNzc1JlbmRlcmVyIiwiY2FtZXJhIiwiZm92IiwiYXNwZWN0IiwibmVhciIsImZhciIsInZ3IiwidmgiLCJ2aWRlb1JhdGlvIiwiY29udGFpbmVyUmF0aW8iLCJjYW52YXMiLCJjc3NDYW52YXMiXSwibWFwcGluZ3MiOiI7Ozs7QUFNQSxNQUFNQSxJQUFNLEVBQUMsZ0JBQUFDLEdBQWUsaUJBQUFDLEVBQWU7QUFFcEMsTUFBTUMsRUFBWTtBQUFBLEVBQ3ZCLFlBQVk7QUFBQSxJQUFDLFdBQUFDO0FBQUEsSUFBVyxXQUFBQyxJQUFVO0FBQUEsSUFBTyxZQUFBQyxJQUFXO0FBQUEsSUFBTyxTQUFBQyxJQUFRO0FBQUEsSUFBTyxhQUFBQyxJQUFZO0FBQUEsSUFBTSxZQUFBQyxJQUFXO0FBQUEsSUFDckcsY0FBQUMsSUFBZTtBQUFBLElBQU0scUJBQUFDLElBQXNCO0FBQUEsSUFBTSxtQkFBQUMsSUFBb0I7QUFBQSxFQUN6RSxHQUFLO0FBQ0QsU0FBSyxZQUFZUixHQUNqQixLQUFLLEtB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
